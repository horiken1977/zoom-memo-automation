<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>テスト仕様書 - Zoom Memo Automation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            border-bottom: 2px solid #fd7e14;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #fd7e14;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .nav {
            background: #fd7e14;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        
        .nav a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
            padding: 5px 10px;
            border-radius: 3px;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        
        .section h2 {
            color: #333;
            border-bottom: 2px solid #fd7e14;
            padding-bottom: 10px;
        }
        
        .test-case {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .test-case h3 {
            color: #495057;
            margin-top: 0;
        }
        
        .test-level {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .level-card {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
        }
        
        .level-card h4 {
            color: #856404;
            margin-top: 0;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-not-started { background: #dc3545; }
        .status-in-progress { background: #ffc107; }
        .status-completed { background: #28a745; }
        .status-blocked { background: #6c757d; }
        
        .test-matrix {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            min-width: 600px;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background: #fd7e14;
            color: white;
        }
        
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        .priority-high { background: #f8d7da; }
        .priority-medium { background: #fff3cd; }
        .priority-low { background: #d4edda; }
        
        .test-data-section {
            background: #e7f3ff;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 15px 0;
        }
        
        .automation-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .last-updated {
            text-align: right;
            color: #666;
            font-size: 0.9rem;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧪 テスト仕様書</h1>
            <p>Zoom Memo Automation システムテスト計画</p>
        </div>
        
        <div class="nav">
            <a href="index.html">🏠 ダッシュボード</a>
            <a href="functional-design.html">📋 機能設計書</a>
            <a href="environment-design.html">🏗️ 環境設計書</a>
            <a href="claude.md">💬 対話記録</a>
        </div>
        
        <div class="section">
            <h2>1. テスト戦略</h2>
            
            <h3>テストレベル構成</h3>
            <div class="test-level">
                <div class="level-card">
                    <h4>ユニットテスト</h4>
                    <p>個別コンポーネント・関数のテスト</p>
                    <p><strong>カバレッジ目標:</strong> 80%以上</p>
                    <p><strong>フレームワーク:</strong> Jest, React Testing Library</p>
                </div>
                
                <div class="level-card">
                    <h4>統合テスト</h4>
                    <p>APIエンドポイントと外部サービス連携のテスト</p>
                    <p><strong>カバレッジ目標:</strong> 主要フロー100%</p>
                    <p><strong>フレームワーク:</strong> Supertest, Nock</p>
                </div>
                
                <div class="level-card">
                    <h4>E2Eテスト</h4>
                    <p>実際のユーザーシナリオに基づくテスト</p>
                    <p><strong>カバレッジ目標:</strong> 重要シナリオ100%</p>
                    <p><strong>フレームワーク:</strong> Playwright</p>
                </div>
                
                <div class="level-card">
                    <h4>性能テスト</h4>
                    <p>負荷・ストレステスト</p>
                    <p><strong>目標:</strong> レスポンス時間 < 3秒</p>
                    <p><strong>ツール:</strong> Artillery, Lighthouse</p>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>2. テストケース</h2>
            
            <div class="test-case">
                <h3><span class="status-indicator status-not-started"></span>TC001: Zoom Webhook受信テスト</h3>
                <div class="test-matrix">
                    <table>
                        <tr>
                            <th>項目</th>
                            <th>内容</th>
                        </tr>
                        <tr>
                            <td>目的</td>
                            <td>ZoomからのWebhookを正常に受信し、処理できることを確認</td>
                        </tr>
                        <tr>
                            <td>前提条件</td>
                            <td>Webhook エンドポイントが設定済み</td>
                        </tr>
                        <tr>
                            <td>テスト手順</td>
                            <td>
                                1. Zoomでテストミーティングを開始<br>
                                2. Webhookペイロードを送信<br>
                                3. APIが正常にレスポンスを返すことを確認
                            </td>
                        </tr>
                        <tr>
                            <td>期待結果</td>
                            <td>HTTP 200レスポンス、ログにイベント記録</td>
                        </tr>
                        <tr class="priority-high">
                            <td>優先度</td>
                            <td>高</td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <div class="test-case">
                <h3><span class="status-indicator status-not-started"></span>TC002: 音声認識APIテスト</h3>
                <div class="test-matrix">
                    <table>
                        <tr>
                            <th>項目</th>
                            <th>内容</th>
                        </tr>
                        <tr>
                            <td>目的</td>
                            <td>音声ファイルを正しくテキストに変換できることを確認</td>
                        </tr>
                        <tr>
                            <td>前提条件</td>
                            <td>Google AI API キーが設定済み</td>
                        </tr>
                        <tr>
                            <td>テスト手順</td>
                            <td>
                                1. テスト用音声ファイルをアップロード<br>
                                2. Whisper APIにファイルを送信<br>
                                3. 返されたテキストの精度を確認
                            </td>
                        </tr>
                        <tr>
                            <td>期待結果</td>
                            <td>音声内容の95%以上が正確にテキスト化される</td>
                        </tr>
                        <tr class="priority-high">
                            <td>優先度</td>
                            <td>高</td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <div class="test-case">
                <h3><span class="status-indicator status-not-started"></span>TC003: 議事録生成テスト</h3>
                <div class="test-matrix">
                    <table>
                        <tr>
                            <th>項目</th>
                            <th>内容</th>
                        </tr>
                        <tr>
                            <td>目的</td>
                            <td>テキストから構造化された議事録が生成されることを確認</td>
                        </tr>
                        <tr>
                            <td>前提条件</td>
                            <td>会議テキストデータが準備済み</td>
                        </tr>
                        <tr>
                            <td>テスト手順</td>
                            <td>
                                1. サンプル会議テキストを入力<br>
                                2. GPT APIで議事録を生成<br>
                                3. 生成された議事録の構造と内容を確認
                            </td>
                        </tr>
                        <tr>
                            <td>期待結果</td>
                            <td>適切な見出し、要約、アクションアイテムが含まれる</td>
                        </tr>
                        <tr class="priority-high">
                            <td>優先度</td>
                            <td>高</td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <div class="test-case">
                <h3><span class="status-indicator status-not-started"></span>TC004: ファイルアップロード・ダウンロードテスト</h3>
                <div class="test-matrix">
                    <table>
                        <tr>
                            <th>項目</th>
                            <th>内容</th>
                        </tr>
                        <tr>
                            <td>目的</td>
                            <td>音声ファイルの保存と取得が正常に動作することを確認</td>
                        </tr>
                        <tr>
                            <td>前提条件</td>
                            <td>AWS S3バケットが設定済み</td>
                        </tr>
                        <tr>
                            <td>テスト手順</td>
                            <td>
                                1. 各形式の音声ファイルをアップロード<br>
                                2. ファイルが正しく保存されることを確認<br>
                                3. ダウンロード機能をテスト
                            </td>
                        </tr>
                        <tr>
                            <td>期待結果</td>
                            <td>ファイルの整合性が保たれる</td>
                        </tr>
                        <tr class="priority-medium">
                            <td>優先度</td>
                            <td>中</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>3. テストデータ</h2>
            
            <div class="test-data-section">
                <h4>📁 2.tests/data/ ディレクトリ構成</h4>
                <ul>
                    <li><strong>audio-samples/</strong> - 各種形式の音声テストファイル
                        <ul>
                            <li>short-meeting.mp3 (5分の短い会議)</li>
                            <li>long-meeting.wav (60分の長時間会議)</li>
                            <li>noisy-audio.m4a (ノイズありの音声)</li>
                            <li>multi-speaker.mp3 (複数話者の音声)</li>
                        </ul>
                    </li>
                    <li><strong>mock-responses/</strong> - APIモックレスポンス
                        <ul>
                            <li>zoom-webhook-events.json</li>
                            <li>whisper-api-responses.json</li>
                            <li>gpt-generated-minutes.json</li>
                        </ul>
                    </li>
                    <li><strong>test-configs/</strong> - テスト設定ファイル
                        <ul>
                            <li>jest.config.js</li>
                            <li>playwright.config.ts</li>
                            <li>test-environment.env</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        
        <div class="section">
            <h2>4. 自動テスト</h2>
            
            <div class="automation-info">
                <h4>🔄 テスト自動化ツール</h4>
                <div class="test-matrix">
                    <table>
                        <tr>
                            <th>ツール</th>
                            <th>用途</th>
                            <th>実行タイミング</th>
                            <th>設定状況</th>
                        </tr>
                        <tr>
                            <td>Jest</td>
                            <td>ユニットテスト</td>
                            <td>コミット時、CI/CD</td>
                            <td><span class="status-indicator status-not-started"></span>未設定</td>
                        </tr>
                        <tr>
                            <td>Supertest</td>
                            <td>API統合テスト</td>
                            <td>CI/CD</td>
                            <td><span class="status-indicator status-not-started"></span>未設定</td>
                        </tr>
                        <tr>
                            <td>Playwright</td>
                            <td>E2Eテスト</td>
                            <td>週次、リリース前</td>
                            <td><span class="status-indicator status-not-started"></span>未設定</td>
                        </tr>
                        <tr>
                            <td>Artillery</td>
                            <td>負荷テスト</td>
                            <td>リリース前</td>
                            <td><span class="status-indicator status-not-started"></span>未設定</td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <h3>📋 テスト実行スクリプト</h3>
            <div class="test-data-section">
                <h4>2.tests/tools/test-runners/ スクリプト構成</h4>
                <ul>
                    <li><strong>run-unit-tests.sh</strong> - ユニットテスト実行</li>
                    <li><strong>run-integration-tests.sh</strong> - 統合テスト実行</li>
                    <li><strong>run-e2e-tests.sh</strong> - E2Eテスト実行</li>
                    <li><strong>run-performance-tests.sh</strong> - 性能テスト実行</li>
                    <li><strong>run-all-tests.sh</strong> - 全テスト実行</li>
                </ul>
            </div>
        </div>
        
        <div class="section">
            <h2>5. テスト結果レポート</h2>
            
            <h3>実行結果サマリー</h3>
            <div class="test-matrix">
                <table>
                    <tr>
                        <th>テストタイプ</th>
                        <th>計画数</th>
                        <th>実行数</th>
                        <th>成功数</th>
                        <th>失敗数</th>
                        <th>成功率</th>
                        <th>状況</th>
                    </tr>
                    <tr>
                        <td>ユニットテスト</td>
                        <td>50</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>-</td>
                        <td><span class="status-indicator status-not-started"></span>未開始</td>
                    </tr>
                    <tr>
                        <td>統合テスト</td>
                        <td>20</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>-</td>
                        <td><span class="status-indicator status-not-started"></span>未開始</td>
                    </tr>
                    <tr>
                        <td>E2Eテスト</td>
                        <td>10</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>-</td>
                        <td><span class="status-indicator status-not-started"></span>未開始</td>
                    </tr>
                    <tr>
                        <td>性能テスト</td>
                        <td>5</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>-</td>
                        <td><span class="status-indicator status-not-started"></span>未開始</td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div class="last-updated">
            最終更新: <span id="lastUpdated"></span> | 
            自動更新: <span id="autoUpdate">有効</span>
        </div>
    </div>
    
    <script>
        document.getElementById('lastUpdated').textContent = new Date().toLocaleString('ja-JP');
        
        // 自動更新チェック（Claude対話記録からテスト要件を検知）
        function checkTestUpdates() {
            // 実装予定: claude.mdファイルを解析してテスト追加を自動検出
            console.log('テスト仕様書の自動更新チェック');
        }
        
        setInterval(checkTestUpdates, 300000); // 5分毎
    </script>
</body>
</html>